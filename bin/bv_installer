#! /usr/bin/env python

import sys, os
from optparse import OptionParser
from PyQt4.QtGui import QApplication
from brainvisa.installer.main_window import MainWindow
from brainvisa.installer.aptget import AptGet, PackageManager

defaultRepository = 'file://' + os.environ[ 'HOME' ] + '/repository/'

usage = '''
%prog [options]'''
parser = OptionParser(usage=usage)
parser.add_option( '-i', '--install', dest='install', default='/tmp/install', action='store',
                   help='Installation directory (default = /tmp/install).' )
parser.add_option( '-r', '--repository', dest='repository', default='/tmp/repository', action='store',
                   help='Repository directory (default = ' + defaultRepository + ').' )
(options, args) = parser.parse_args()

app = QApplication( sys.argv )

apt = AptGet( options.install )
if not os.path.exists( options.install ):
  os.mkdir( options.install )
  apt.createNewConfiguration( repository=options.repository )

packageManager = PackageManager( apt )
mainWindow = MainWindow( packageManager )

mainWindow.show()

app.exec_()


